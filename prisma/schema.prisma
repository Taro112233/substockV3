// This file is auto-generated. Do not edit manually.
// Edit files in prisma/schemas/ directory instead.
// Last generated: 2025-08-26T15:38:10.219Z
// Hospital Pharmacy Stock Management System V3.0

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}


// ==========================================
// BASE - V3.0
// ==========================================

// prisma/schemas/base.prisma
// ===== 1. BASE CONFIGURATION & ENUMS - V3.0 UPDATED =====

// ‚ö†Ô∏è NOTE: Remove generator and datasource from here - they're in main schema

// ===== CORE ENUMS =====
enum Department {
  PHARMACY    // ‡∏Ñ‡∏•‡∏±‡∏á‡∏¢‡∏≤
  OPD         // OPD
}

enum UserStatus {
  UNAPPROVED  // ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥
  APPROVED    // ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß
  SUSPENDED   // ‡∏£‡∏∞‡∏á‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
  INACTIVE    // ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
}

// ‚≠ê ‡∏•‡∏ö Role enum ‡∏≠‡∏≠‡∏Å ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ fixed roles
// ‡πÅ‡∏ï‡πà‡∏•‡∏∞ user ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å department ‡∏ï‡∏≤‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

enum TransactionType {
  // ‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏à‡∏£‡∏¥‡∏á (‡∏°‡∏µ‡∏ú‡∏•‡∏ï‡πà‡∏≠ totalQuantity)
  RECEIVE_EXTERNAL    // ‡∏£‡∏±‡∏ö‡∏¢‡∏≤‡∏à‡∏≤‡∏Å‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å (‡∏ã‡∏∑‡πâ‡∏≠/‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ)
  DISPENSE_EXTERNAL   // ‡∏à‡πà‡∏≤‡∏¢‡∏¢‡∏≤‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢
  TRANSFER_OUT        // ‡∏™‡πà‡∏á‡∏¢‡∏≤‡πÉ‡∏´‡πâ‡πÅ‡∏ú‡∏ô‡∏Å‡∏≠‡∏∑‡πà‡∏ô
  TRANSFER_IN         // ‡∏£‡∏±‡∏ö‡∏¢‡∏≤‡∏à‡∏≤‡∏Å‡πÅ‡∏ú‡∏ô‡∏Å‡∏≠‡∏∑‡πà‡∏ô
  ADJUST_INCREASE     // ‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏ï‡πá‡∏≠‡∏Å (‡∏ô‡∏±‡∏ö‡∏™‡∏ï‡πá‡∏≠‡∏Å/‡∏Ñ‡∏∑‡∏ô‡∏¢‡∏≤/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•)
  ADJUST_DECREASE     // ‡∏õ‡∏£‡∏±‡∏ö‡∏•‡∏î‡∏™‡∏ï‡πá‡∏≠‡∏Å (‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢/‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏/‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢)
  RESERVE             // ‡∏à‡∏≠‡∏á‡∏¢‡∏≤ (‡∏•‡∏î available ‡πÅ‡∏ï‡πà totalQuantity ‡πÄ‡∏ó‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏°)
  UNRESERVE           // ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á (‡πÄ‡∏û‡∏¥‡πà‡∏° available)

  // ‚úÖ ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Minimum Stock (‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏•‡∏ï‡πà‡∏≠ totalQuantity)
  MIN_STOCK_INCREASE  // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥
  MIN_STOCK_DECREASE  // ‡∏•‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥
  MIN_STOCK_RESET     // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥
  
  // ‚úÖ ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏∑‡πà‡∏ô‡πÜ (‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏•‡∏ï‡πà‡∏≠‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏ï‡πá‡∏≠‡∏Å)
  DATA_UPDATE         // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ
  PRICE_UPDATE        // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡∏≤‡∏Ñ‡∏≤‡∏¢‡∏≤
  INFO_CORRECTION     // ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡∏≤
}

enum TransferStatus {
  PENDING     // ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ö‡∏¥‡∏Å / ‡πÉ‡∏ö‡πÄ‡∏ö‡∏¥‡∏Å‡πÉ‡∏´‡∏°‡πà
  APPROVED    // ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏à‡∏±‡∏î‡∏™‡πà‡∏á
  PREPARED    // ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏±‡∏î‡∏™‡πà‡∏á (‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à)
  DELIVERED   // ‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
  CANCELLED   // ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
}

// ===== DRUG-SPECIFIC ENUMS =====
enum DosageForm {
  APP    // Applicator
  BAG    // Bag
  CAP    // Capsule
  CR     // Cream
  DOP    // Drops
  ENE    // Enema
  GEL    // Gel
  HAN    // Hand
  IMP    // Implant
  INJ    // Injection
  LIQ    // Liquid
  LOT    // Lotion
  LVP    // Large Volume Parenteral
  MDI    // Metered Dose Inhaler
  MIX    // Mixture
  NAS    // Nasal
  NB     // Nebule
  OIN    // Ointment
  PAT    // Patch
  POW    // Powder
  PWD    // Powder (alternate)
  SAC    // Sachet
  SOL    // Solution
  SPR    // Spray
  SUP    // Suppository
  SUS    // Suspension
  SYR    // Syrup
  TAB    // Tablet
  TUR    // Tube
}

enum DrugCategory {
  REFER           // ‡∏¢‡∏≤ refer
  HAD      // ‡∏¢‡∏≤ High Alert Drug
  NARCOTIC        // ‡∏¢‡∏≤ ‡πÄ‡∏™‡∏û‡∏ï‡∏¥‡∏î
  REFRIGERATED    // ‡∏¢‡∏≤ ‡πÅ‡∏ä‡πà‡πÄ‡∏¢‡πá‡∏ô
  PSYCHIATRIC     // ‡∏¢‡∏≤ ‡∏à‡∏¥‡∏ï‡πÄ‡∏ß‡∏ä
  FLUID           // ‡∏™‡∏≤‡∏£‡∏ô‡πâ‡∏≥
  GENERAL         // ‡∏¢‡∏≤‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ (default)
  TABLET          // ‡∏¢‡∏≤‡πÄ‡∏°‡πá‡∏î
  SYRUP           // ‡∏¢‡∏≤‡∏ô‡πâ‡∏≥
  INJECTION       // ‡∏¢‡∏≤‡∏â‡∏µ‡∏î
  EXTEMP       // ‡∏¢‡∏≤‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å
  ALERT           // ‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ù‡πâ‡∏≤‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏û‡∏¥‡πÄ‡∏®‡∏© (‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÉ‡∏ä‡πâ‡∏ú‡∏±‡∏ô‡∏ú‡∏ß‡∏ô‡∏™‡∏π‡∏á)
}

// ==========================================
// DRUG - V3.0
// ==========================================

// prisma/schemas/drug.prisma
// ===== 3. DRUG MASTER SCHEMA =====

// Enhanced Drug Model with Hospital-specific Data and Enums
model Drug {
  id              String       @id @default(cuid())
  hospitalDrugCode String      @unique // ‡∏£‡∏´‡∏±‡∏™‡∏¢‡∏≤‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•
  name            String       // ‡∏ä‡∏∑‡πà‡∏≠‡∏¢‡∏≤‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏≤
  genericName     String?      // ‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏°‡∏±‡∏ç‡∏¢‡∏≤
  dosageForm      DosageForm   // ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏¢‡∏≤ (enum)
  strength        String?      // ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏£‡∏á‡∏¢‡∏≤ (500, 250)
  unit            String       // ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏ô‡∏±‡∏ö (mg, g, mg/5ml)
  packageSize     String?      // ‡∏Ç‡∏ô‡∏≤‡∏î‡∏ö‡∏£‡∏£‡∏à‡∏∏ (100's, 500)
  pricePerBox     Float        @default(0) // ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏Å‡∏•‡πà‡∏≠‡∏á/‡∏´‡∏ô‡πà‡∏ß‡∏¢
  category        DrugCategory @default(GENERAL) // ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏¢‡∏≤ (enum)
  isActive        Boolean      @default(true)
  notes           String?      // ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°
  createdAt       DateTime     @default(now())
  updatedAt       DateTime     @updatedAt
  
  // Relations
  stocks          Stock[]
  transferItems   TransferItem[]
  batches         DrugBatch[]
  
  // Indexes ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Performance
  @@index([hospitalDrugCode])
  @@index([name])
  @@index([category])
  @@index([dosageForm])
  @@index([isActive])
  @@index([genericName])
  @@map("drugs")
}

// Drug Batch Management (LOT/EXPIRY)
model DrugBatch {
  id            String   @id @default(cuid())
  drugId        String
  department    Department
  lotNumber     String
  expiryDate    DateTime
  manufacturer  String?
  quantity      Int      @default(0)
  costPerUnit   Float    @default(0)
  receivedDate  DateTime @default(now())
  
  // Relations
  drug          Drug     @relation(fields: [drugId], references: [id], onDelete: Cascade)
  transactions  StockTransaction[]
  
  // Constraints
  @@unique([drugId, department, lotNumber, expiryDate])
  
  // Indexes
  @@index([expiryDate])
  @@index([department])
  @@index([drugId])
  @@map("drug_batches")
}

// ==========================================
// STOCK - V3.0
// ==========================================

// prisma/schemas/stock.prisma
// ===== 4. STOCK MANAGEMENT SCHEMA - ENHANCED V3.0 =====

// Stock with Department Isolation & Batch Tracking
model Stock {
  id            String     @id @default(cuid())
  drugId        String
  department    Department
  totalQuantity Int        @default(0) // ‡∏£‡∏ß‡∏°‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏Å batch
  reservedQty   Int        @default(0) // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏á‡πÑ‡∏ß‡πâ
  minimumStock  Int        @default(10) // minimum stock ‡∏Ç‡∏≠‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏ô‡∏±‡πâ‡∏ô
  fixedStock    Int        @default(0) // minimum stock ‡∏Ç‡∏≠‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏ô‡∏±‡πâ‡∏ô
  totalValue    Float      @default(0) // ‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏£‡∏ß‡∏°
  lastUpdated   DateTime   @updatedAt

  // Relations
  drug         Drug               @relation(fields: [drugId], references: [id], onDelete: Cascade)
  transactions StockTransaction[]

  // Constraints - ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏¢‡∏≤‡πÉ‡∏ô 1 ‡πÅ‡∏ú‡∏ô‡∏Å‡∏°‡∏µ stock record ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
  @@unique([drugId, department])
  // Indexes ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Performance
  @@index([department])
  @@index([totalQuantity])
  @@index([drugId])
  @@map("stocks")
}

// ‚≠ê Enhanced Transaction Tracking with Minimum Stock Support
model StockTransaction {
  id         String  @id @default(cuid())
  stockId    String
  userId     String
  batchId    String? // Link to specific batch
  transferId String? // Link to transfer if applicable

  type      TransactionType
  
  // üì¶ STOCK QUANTITY FIELDS (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏à‡∏£‡∏¥‡∏á)
  quantity  Int // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô (+/-) ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏™‡∏ï‡πá‡∏≠‡∏Å
  beforeQty Int // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
  afterQty  Int // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏´‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£

  // üéØ MINIMUM STOCK FIELDS (‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥) - ‚≠ê ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà
  minStockChange    Int? @default(0) // ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥ (+/-)
  beforeMinStock    Int? // ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
  afterMinStock     Int? // ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥‡∏´‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£

  // üí∞ FINANCIAL FIELDS
  unitCost  Float @default(0)
  totalCost Float @default(0)

  // üìÑ REFERENCE & AUDIT FIELDS
  reference String? // ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á
  note      String? // ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏
  createdAt DateTime @default(now())

  // Relations
  stock    Stock      @relation(fields: [stockId], references: [id], onDelete: Cascade)
  user     User       @relation(fields: [userId], references: [id])
  batch    DrugBatch? @relation(fields: [batchId], references: [id])
  transfer Transfer?  @relation(fields: [transferId], references: [id])

  // Indexes ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Performance & Reporting
  @@index([stockId])
  @@index([type])
  @@index([transferId])
  @@index([createdAt])
  @@index([userId])
  @@map("stock_transactions")
}

// ==========================================
// TRANSFER - V3.0
// ==========================================

// prisma/schemas/transfer.prisma
// ===== 5. TRANSFER SYSTEM SCHEMA =====

// Enhanced Transfer System with Multi-step Workflow
model Transfer {
  id                String         @id @default(cuid())
  requisitionNumber String         @unique // ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡πÄ‡∏ö‡∏¥‡∏Å (manual input)
  title             String         // ‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏ö‡πÄ‡∏ö‡∏¥‡∏Å
  purpose           String         // ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå
  
  // Departments & Users
  fromDept          Department     // ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏≠‡πÄ‡∏ö‡∏¥‡∏Å (‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á)
  toDept            Department     // ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡πÄ‡∏ö‡∏¥‡∏Å (‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á)
  
  // User Signatures (Auto from login)
  requesterId       String         // ‡∏ú‡∏π‡πâ‡πÄ‡∏ö‡∏¥‡∏Å
  approverId        String?        // ‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥
  dispenserId       String?        // ‡∏ú‡∏π‡πâ‡∏à‡πà‡∏≤‡∏¢
  receiverId        String?        // ‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö
  
  // Status & Notes
  status            TransferStatus @default(PENDING)
  requestNote       String?        // ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠
  approvalNote      String?        // ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥
  
  // Financial
  totalItems        Int            @default(0)
  totalValue        Float          @default(0) // ‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏£‡∏ß‡∏°
  
  // Timestamps - Track complete workflow
  requestedAt       DateTime       @default(now())
  approvedAt        DateTime?
  dispensedAt       DateTime?      // ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à
  receivedAt        DateTime?      // ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á
  
  // Relations
  requester         User           @relation("RequesterUser", fields: [requesterId], references: [id])
  approver          User?          @relation("ApproverUser", fields: [approverId], references: [id])
  dispenser         User?          @relation("DispenserUser", fields: [dispenserId], references: [id])
  receiver          User?          @relation("ReceiverUser", fields: [receiverId], references: [id])
  items             TransferItem[]
  stockTransactions StockTransaction[] // ‚≠ê ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà
  
  // Indexes ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Performance
  @@index([status])
  @@index([fromDept])
  @@index([toDept])
  @@index([requestedAt])
  @@index([requisitionNumber])
  @@map("transfers")
}

// Enhanced Transfer Items with Batch Information
model TransferItem {
  id              String   @id @default(cuid())
  transferId      String
  drugId          String
  
  // Quantities at different stages
  requestedQty    Int      // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏ö‡∏¥‡∏Å
  approvedQty     Int?     // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥
  dispensedQty    Int?     // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏à‡πà‡∏≤‡∏¢ (‡πÉ‡∏ö‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á)
  receivedQty     Int?     // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏±‡∏ö‡∏à‡∏£‡∏¥‡∏á
  
  // Batch Information (for dispensing)
  lotNumber       String?  // Lot number
  expiryDate      DateTime? // ‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏
  manufacturer    String?  // ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó
  
  // Financial
  unitPrice       Float    @default(0) // ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢
  totalValue      Float    @default(0) // ‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤ (dispensedQty √ó unitPrice)
  
  // Notes
  itemNote        String?  // ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
  
  // Relations
  transfer        Transfer @relation(fields: [transferId], references: [id], onDelete: Cascade)
  drug            Drug     @relation(fields: [drugId], references: [id])
  
  // Indexes
  @@index([transferId])
  @@index([drugId])
  @@map("transfer_items")
}

// ==========================================
// USER - V3.0
// ==========================================

// prisma/schemas/user.prisma
// ===== 2. USER MANAGEMENT SCHEMA - V3.0 UNIFIED ACCESS =====

// Simple User Management - ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡πÅ‡∏ú‡∏ô‡∏Å
// Context ‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏à‡∏≤‡∏Å fixed role/department
model User {
  id          String     @id @default(cuid())
  username    String     @unique  // ‚≠ê REQUIRED: For authentication
  password    String     // bcrypt hashed
  firstName   String     // ‚≠ê REQUIRED: First name
  lastName    String     // ‚≠ê REQUIRED: Last name  
  position    String?    // ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏á‡∏≤‡∏ô (‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)
  
  // ‚≠ê ‡πÑ‡∏°‡πà‡∏°‡∏µ department/role ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ï‡∏≤‡∏¢ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡πÅ‡∏ú‡∏ô‡∏Å
  // Context ‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏±‡πâ‡∏ô‡πÜ
  
  status      UserStatus @default(UNAPPROVED) // ‚≠ê REQUIRED: User approval status
  isActive    Boolean    @default(true)
  lastLogin   DateTime?  // ‚≠ê REQUIRED: Track login activity
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt
  
  // Relations - ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö actions ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà user ‡∏ó‡∏≥‡πÑ‡∏î‡πâ
  stockTransactions     StockTransaction[]
  transfersRequested    Transfer[] @relation("RequesterUser")
  transfersApproved     Transfer[] @relation("ApproverUser")
  transfersDispensed    Transfer[] @relation("DispenserUser")
  transfersReceived     Transfer[] @relation("ReceiverUser")
  
  // Indexes ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Performance
  @@index([status])
  @@index([username])
  @@index([isActive])
  @@map("users")
}
