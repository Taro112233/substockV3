// prisma/schemas/user.prisma
// ===== 2. USER MANAGEMENT SCHEMA - V3.0 COMPLETE =====

// Updated User Management - Unified Hospital Access with All Required Fields
model User {
  id          String     @id @default(cuid())
  username    String     @unique  // ⭐ REQUIRED: For authentication
  password    String     // bcrypt hashed
  firstName   String     // ⭐ REQUIRED: First name
  lastName    String     // ⭐ REQUIRED: Last name  
  position    String?    // ตำแหน่งงาน (optional)
  status      UserStatus @default(UNAPPROVED) // ⭐ REQUIRED: User approval status
  isActive    Boolean    @default(true)
  lastLogin   DateTime?  // ⭐ REQUIRED: Track login activity
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt
  
  // Relations - จะเชื่อมต่อกับ models อื่นในภายหลัง
  stockTransactions     StockTransaction[]
  transfersRequested    Transfer[] @relation("RequesterUser")
  transfersApproved     Transfer[] @relation("ApproverUser")
  transfersDispensed    Transfer[] @relation("DispenserUser")
  transfersReceived     Transfer[] @relation("ReceiverUser")
  
  // Indexes สำหรับ Performance
  @@index([status])
  @@index([username])
  @@index([isActive])
  @@map("users")
}